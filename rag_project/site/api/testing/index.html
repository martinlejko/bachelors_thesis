
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for RAG-based Bachelor's Thesis">
      
      
        <meta name="author" content="Martin Lejko">
      
      
      
        <link rel="prev" href="../rag_pipeline/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Testing - RAG Project Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#testing-framework" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="RAG Project Documentation" class="md-header__button md-logo" aria-label="RAG Project Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RAG Project Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Testing
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="RAG Project Documentation" class="md-nav__button md-logo" aria-label="RAG Project Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    RAG Project Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rag_pipeline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RAG Pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#test-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Test Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.conftest" class="md-nav__link">
    <span class="md-ellipsis">
      conftest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.conftest.evaluation_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      evaluation_metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.conftest.qa_pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      qa_pipeline
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-cases-data" class="md-nav__link">
    <span class="md-ellipsis">
      Test Cases Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.test_data" class="md-nav__link">
    <span class="md-ellipsis">
      test_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rag-system-tests" class="md-nav__link">
    <span class="md-ellipsis">
      RAG System Tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.test_rag" class="md-nav__link">
    <span class="md-ellipsis">
      test_rag
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.test_rag.test_all_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      test_all_dataset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Test Execution
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#test-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Test Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.conftest" class="md-nav__link">
    <span class="md-ellipsis">
      conftest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.conftest.evaluation_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      evaluation_metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.conftest.qa_pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      qa_pipeline
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-cases-data" class="md-nav__link">
    <span class="md-ellipsis">
      Test Cases Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.test_data" class="md-nav__link">
    <span class="md-ellipsis">
      test_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rag-system-tests" class="md-nav__link">
    <span class="md-ellipsis">
      RAG System Tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.test_rag" class="md-nav__link">
    <span class="md-ellipsis">
      test_rag
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof_of_concept.testing.test_rag.test_all_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      test_all_dataset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Test Execution
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="testing-framework">Testing Framework</h1>
<p>This section documents the testing framework used to evaluate the RAG system's performance.</p>
<h2 id="test-configuration">Test Configuration</h2>


<div class="doc doc-object doc-module">



<a id="proof_of_concept.testing.conftest"></a>
    <div class="doc doc-contents first">

        <p>Pytest configuration and shared fixtures</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="proof_of_concept.testing.conftest.evaluation_metrics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">evaluation_metrics</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Define evaluation metrics used across tests.</p>


            <details class="quote">
              <summary>Source code in <code>proof_of_concept/testing/conftest.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">evaluation_metrics</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define evaluation metrics used across tests.&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="p">[</span>
        <span class="n">GEval</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Answer Correctness&quot;</span><span class="p">,</span>
            <span class="n">criteria</span><span class="o">=</span><span class="s2">&quot;Determine if the actual output correctly answers the question based on the expected output.&quot;</span><span class="p">,</span>
            <span class="n">evaluation_params</span><span class="o">=</span><span class="p">[</span>
                <span class="n">LLMTestCaseParams</span><span class="o">.</span><span class="n">INPUT</span><span class="p">,</span>
                <span class="n">LLMTestCaseParams</span><span class="o">.</span><span class="n">ACTUAL_OUTPUT</span><span class="p">,</span>
                <span class="n">LLMTestCaseParams</span><span class="o">.</span><span class="n">EXPECTED_OUTPUT</span><span class="p">,</span>
                <span class="n">LLMTestCaseParams</span><span class="o">.</span><span class="n">CONTEXT</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="n">threshold</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">GEval</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Answer Relevancy&quot;</span><span class="p">,</span>
            <span class="n">criteria</span><span class="o">=</span><span class="s2">&quot;Evaluate if the response is directly relevant to the question asked.&quot;</span><span class="p">,</span>
            <span class="n">evaluation_params</span><span class="o">=</span><span class="p">[</span>
                <span class="n">LLMTestCaseParams</span><span class="o">.</span><span class="n">INPUT</span><span class="p">,</span>
                <span class="n">LLMTestCaseParams</span><span class="o">.</span><span class="n">ACTUAL_OUTPUT</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="n">threshold</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">GEval</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Conciseness&quot;</span><span class="p">,</span>
            <span class="n">criteria</span><span class="o">=</span><span class="s2">&quot;Check if the response is within three sentences and provides a clear answer.&quot;</span><span class="p">,</span>
            <span class="n">evaluation_params</span><span class="o">=</span><span class="p">[</span>
                <span class="n">LLMTestCaseParams</span><span class="o">.</span><span class="n">ACTUAL_OUTPUT</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="n">threshold</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">GEval</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Context Relevancy&quot;</span><span class="p">,</span>
            <span class="n">criteria</span><span class="o">=</span><span class="s2">&quot;Evaluate if the retrieved context contains information relevant to answering the query. The context should contain facts or information directly related to what the question is asking about.&quot;</span><span class="p">,</span>
            <span class="n">evaluation_params</span><span class="o">=</span><span class="p">[</span>
                <span class="n">LLMTestCaseParams</span><span class="o">.</span><span class="n">INPUT</span><span class="p">,</span>
                <span class="n">LLMTestCaseParams</span><span class="o">.</span><span class="n">RETRIEVAL_CONTEXT</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="n">threshold</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="proof_of_concept.testing.conftest.qa_pipeline" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">qa_pipeline</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Initialize RAG pipeline once for all tests.</p>


            <details class="quote">
              <summary>Source code in <code>proof_of_concept/testing/conftest.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">qa_pipeline</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize RAG pipeline once for all tests.&quot;&quot;&quot;</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;https://d3s.mff.cuni.cz/teaching/nswi200/teams/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;https://d3s.mff.cuni.cz/teaching/nprg035/&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="n">raw_data</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span>
    <span class="n">processed_data</span> <span class="o">=</span> <span class="n">process_data</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
    <span class="n">vectorstore</span> <span class="o">=</span> <span class="n">create_vectorstore</span><span class="p">(</span><span class="n">processed_data</span><span class="p">)</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">setup_model</span><span class="p">()</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="n">create_prompt_template</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">create_qa_chain</span><span class="p">(</span><span class="n">vectorstore</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">prompt</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="test-cases-data">Test Cases Data</h2>


<div class="doc doc-object doc-module">



<a id="proof_of_concept.testing.test_data"></a>
    <div class="doc doc-contents first">

        <p>Test case definitions and expected results for RAG system evaluation.</p>
<p>This module defines test cases used for evaluating the RAG system's performance.
Each test case contains:
- question: The query to be answered by the RAG system
- expected_output: The expected answer from the system
- context: Sample context data that contains the information needed to answer correctly</p>









  <div class="doc doc-children">











  </div>

    </div>

</div><h2 id="rag-system-tests">RAG System Tests</h2>


<div class="doc doc-object doc-module">



<a id="proof_of_concept.testing.test_rag"></a>
    <div class="doc doc-contents first">

        <p>RAG system evaluation tests.</p>
<p>This module contains pytest tests that evaluate the RAG pipeline's performance
using test cases and metrics defined in the project. The tests use DeepEval 
for running evaluations and generating test reports.</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="proof_of_concept.testing.test_rag.test_all_dataset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">test_all_dataset</span><span class="p">(</span><span class="n">qa_pipeline</span><span class="p">,</span> <span class="n">evaluation_metrics</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Test the RAG pipeline using EvaluationDatasetFactory on all test cases.</p>
<p>This test:
1. Creates a test dataset from the defined test cases
2. Evaluates the RAG pipeline using the configured metrics
3. Saves test results and generates a report</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>qa_pipeline</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Fixture providing the configured RAG pipeline</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>evaluation_metrics</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Fixture providing the evaluation metrics</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>proof_of_concept/testing/test_rag.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_all_dataset</span><span class="p">(</span><span class="n">qa_pipeline</span><span class="p">,</span> <span class="n">evaluation_metrics</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Test the RAG pipeline using EvaluationDatasetFactory on all test cases.</span>

<span class="sd">    This test:</span>
<span class="sd">    1. Creates a test dataset from the defined test cases</span>
<span class="sd">    2. Evaluates the RAG pipeline using the configured metrics</span>
<span class="sd">    3. Saves test results and generates a report</span>

<span class="sd">    Args:</span>
<span class="sd">        qa_pipeline: Fixture providing the configured RAG pipeline</span>
<span class="sd">        evaluation_metrics: Fixture providing the evaluation metrics</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dataset</span> <span class="o">=</span> <span class="n">EvaluationDatasetFactory</span><span class="o">.</span><span class="n">create_from_dict_with_invocation</span><span class="p">(</span><span class="n">TEST_CASES</span><span class="p">,</span> <span class="n">qa_pipeline</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span>
        <span class="n">test_cases</span><span class="o">=</span><span class="n">dataset</span><span class="o">.</span><span class="n">test_cases</span><span class="p">,</span>
        <span class="n">metrics</span><span class="o">=</span><span class="n">evaluation_metrics</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">save_test_results</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s2">&quot;proof_of_concept&quot;</span><span class="p">)</span>
    <span class="n">report_from_latest_json</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="test-execution">Test Execution</h2>
<p>The tests can be run using pytest:</p>
<pre><code class="language-bash">pytest proof_of_concept/testing/
</code></pre>
<p>The test results are saved and can be viewed in the generated reports. </p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>